#!/bin/bash
set -e

BRANCH=$(git symbolic-ref HEAD | sed 's@^refs/heads/@@')
[ -n "$BRANCH" ] || exit 1

WORK_REPO='f34a409794c6064a82d433318ae6a5aa48395f40'
if [ "$(git remote -v show -n | sha1sum)" = "$WORK_REPO  -" ]; then
	[ $BRANCH = 'master' ] || BRANCH=dev/${BRANCH#dev/}
fi

case "$1" in
    ..|origin|remote) shift; git log "$@" ..origin/$BRANCH; exit;;
    .|local)          shift; git log "$@" origin/$BRANCH..; exit;;
esac

cat <<EOF >&2
Usage: ${0##*/} <where> [<git-log(1) options>]

<where> argument is:
    .. | origin | remote  Show remote commits not present in the local branch.
    . | local             Show local commits not pushed to the origin.

Example:
    ${0##*/} .. --oneline
EOF
exit 1
